<%- include('partials/navbar') %>

<div class="container mt-4">

  <% if (post.banner) { %>
    <img src="https://beta.kenyschulz.com/referee/api/<%= encodeURIComponent(post.banner) %>" 
         alt="<%= post.title %>" 
         class="img-fluid rounded mb-4"
         style="max-height:400px; object-fit:cover; width:100%;">
  <% } %>

  <h1><%= post.title %></h1>
  <small class="text-muted"><%= post.created_at %></small>
  
  <div class="mt-3"><%- post.content %></div> <!-- Render HTML -->

  <!-- Tags -->
  <% if (tags && tags.length > 0) { %>
    <div class="mt-4">
      <h6>Tags:</h6>
      <% tags.forEach(tag => { %>
        <% 
          let link = "#"; 
          if (tag.category === "Competition") link = `/competitions/${tag.value.toLowerCase()}`;
          if (tag.category === "Referee") link = `/referees/${tag.id}`;
          if (tag.category === "Pair") link = `/pairs/${tag.id}`;
          if (tag.category === "Team") link = `/teams/${tag.id}`;
          if (tag.category === "Mutual") link = `/mutuals/${tag.id}`;
        %>
        <a href="<%= link %>" class="badge bg-primary me-1">
          <%= tag.value %> <small>(<%= tag.category %>)</small>
        </a>
      <% }) %>
    </div>
  <% } %>
  
  <a href="/" class="btn btn-primary mt-3">ZpÄ›t</a>
</div>
